var w = 800; // screen width
var h = 600; // screen height
var scale = 2; // sprite scale
var step = 1 / 60; // update loop step
var level = 0; // current level
var state = null; // current game state
var tc = localStorage.getItem('tc');
var autoCenter = tc ? +tc : 1; // auto center truck wheels
var crashThreshold = 0.5;
var levels = [ // levels
	{
		"w": 800,
		"h": 600,
		"o": [],
		"p": [200, 50, 0],
		"t": [0, 0, 0],
		"tr": [200, 500, 180],
		"tt": [700, 230, 90]
	}, {
		"w": 800,
		"h": 800,
		"o": [2, 310, 600, 0, 2, 490, 600, 0, 6, 400, 750, 0],
		"p": [750, 320, 90],
		"t": [60, 40, 20],
		"tr": [400, 100, 0],
		"tt": [400, 600, 180]
	}, {
		"w": 800,
		"h": 600,
		"o": [2, 170, 500, 0],
		"p": [490, 550, 180],
		"t": [90, 60, 30],
		"tr": [690, 100, 0],
		"tt": [80, 500, 180]
	}, {
		"w": 1000,
		"h": 600,
		"o": [2, 110, 500, 0, 2, 630, 500, 0, 5, 630, 350, 0, 2, 390, 100, 0, 5, 390, 250, 0],
		"p": [460, 40, 270],
		"t": [90, 70, 40],
		"tr": [50, 500, 180],
		"tt": [910, 500, 180]
	}, {
		"w": 1040,
		"h": 600,
		"o": [2, 930, 100, 0, 2, 470, 100, 0, 5, 470, 550, 0, 2, 110, 500, 0, 6, 470, 300, 90],
		"p": [170, 550, 180],
		"t": [90, 60, 30],
		"tr": [50, 500, 180],
		"tt": [990, 100, 0]
	}, {
		"w": 800,
		"h": 1100,
		"o": [2, 210, 900, 0, 2, 100, 350, 90, 5, 250, 350, 0, 2, 250, 100, 0, 6, 700, 450, 0, 6, 280, 750, 0, 6, 280, 1050, 0],
		"p": [50, 50, 0],
		"t": [150, 100, 60],
		"tr": [740, 100, 0, 320, 960, 270],
		"tt": [320, 850, 270, 90, 1000, 180]
	}, {
		"w": 800,
		"h": 1160,
		"o": [2, 250, 100, 0, 2, 250, 500, 0, 2, 100, 350, 90, 2, 250, 860, 0, 6, 700, 350, 0, 6, 700, 1110, 0, 5, 250, 350, 0, 6, 250, 1060, 90],
		"p": [750, 730, 90],
		"t": [150, 90, 60],
		"tr": [30, 100, 0, 70, 1060, 180],
		"tt": [130, 1060, 180, 700, 50, 90]
	}, {
		"w": 1060,
		"h": 600,
		"o": [2, 170, 100, 0, 2, 170, 300, 0, 2, 350, 300, 0, 2, 350, 500, 0, 2, 530, 100, 0, 2, 530, 300, 0, 2, 710, 300, 0, 2, 710, 500, 0, 2, 890, 100, 0, 2, 890, 300, 0],
		"p": [980, 50, 0],
		"t": [150, 90, 60],
		"tr": [80, 100, 0],
		"tt": [980, 500, 180]
	}, {
		"w": 800,
		"h": 600,
		"o": [2, 170, 500, 0, 2, 280, 190, 90, 6, 130, 100, 90, 5, 210, 350, 0, 6, 360, 350, 0, 6, 750, 300, 90],
		"p": [40, 50, 0],
		"t": [120, 90, 60],
		"tr": [40, 500, 180, 280, 510, 270],
		"tt": [280, 450, 270, 280, 130, 270]
	}, {
		"w": 800,
		"h": 980,
		"o": [2, 500, 290, 90, 2, 700, 290, 90, 2, 200, 490, 90, 2, 400, 490, 90, 2, 500, 690, 90, 2, 700, 690, 90, 2, 100, 190, 90, 5, 350, 310, 0, 5, 50, 490, 0, 5, 550, 490, 0, 5, 350, 670, 0, 2, 100, 790, 90, 6, 100, 930, 0, 6, 100, 50, 0],
		"p": [750, 490, 90],
		"t": [150, 120, 90],
		"tr": [700, 40, 90, 700, 940, 90],
		"tt": [100, 840, 270, 100, 140, 270]
	}, {
		"w": 860,
		"h": 960,
		"o": [2, 660, 470, 90, 2, 490, 200, 0, 2, 460, 610, 90, 2, 570, 580, 0, 2, 150, 200, 0, 5, 150, 50, 0, 5, 530, 50, 0, 6, 810, 560, 90, 5, 310, 630, 0, 5, 50, 630, 0, 6, 400, 350, 0, 5, 150, 350, 0],
		"p": [40, 50, 0],
		"t": [180, 150, 100],
		"tr": [380, 30, 90, 760, 30, 90, 380, 90, 90],
		"tt": [730, 580, 0, 610, 580, 0, 670, 580, 0]
	}, {
		"w": 860,
		"h": 640,
		"o": [2, 380, 190, 90, 2, 560, 430, 90, 2, 110, 340, 0, 2, 110, 540, 0, 6, 180, 190, 0, 6, 580, 190, 0, 5, 410, 430, 0, 6, 760, 430, 0],
		"p": [50, 590, 180],
		"t": [150, 120, 70],
		"tr": [380, 110, 90],
		"tt": [760, 530, 90]
	}
];
var sounds = {
	'c': {
		c: 5,
		s: [0, , 0.0135, 0.32, 0.16, 0.33, , , , , , , 0.5, , , , , , 1, , , , , 0.4]
	},
	'h': {
		c: 10,
		s: [3, , 0.2, 0.5, 0.05, 0.04, , , , , , -0.25, 0.67, , , , , , 1, , , , , 0.5]
	},
	'w': {
		c: 1,
		s: [0, , 0.34, , 0.49, 0.49, , , , , , 0.52, 0.5, , -1, , -1, , 1, -1, , , -1, 0.5]
	},
	'f': {
		c: 1,
		s: [0, , 0.44, , 0.2, 0.37, , -0.12, , , , , , 0.01, , , , , 0.74, , , 0.24, , 0.5]
	},
	'r': {
		c: 5,
		s: [0, 0.06, 0.4, , 0.06, 0.56, , , , , , , , , , , , , 0.5, , , , -1, 0.3]
	},
	'a': {
		c: 5,
		s: [3, , 0.18, 0.17, 0.64, 1, , , , , , , , -1, -1, , , , 1, , , , , 0.4]
	}
};
var states = {};
var typeMap = ['tl', 't', 'w', 'c', 'p', 'bs', 'bb'];

var scores, last, camera, gradient, soundBtn, centerBtn, resetBtn;
